!function(){var e={initialized:!1,viewModel:{imageLoaded:{"./images/sample_1.jpg":!1,"./images/sample_2.jpg":!1,"./images/sample_3.jpg":!1,"./images/sample_4.jpg":!1,"./images/sample_5.jpg":!1},p2Images:[["./images/sample_1.jpg","./images/sample_2.jpg","./images/sample_3.jpg"],["./images/sample_4.jpg","./images/sample_5.jpg",""],["./images/sample_1.jpg","./images/sample_2.jpg","./images/sample_3.jpg"],["./images/sample_1.jpg","./images/sample_2.jpg","./images/sample_3.jpg"]],showArrowUp:!1,showArrowDown:!1,currentPage:1,totalPages:2,pageScrollInterval:1,browser:null,init:function(){this.changeArrow(),this.detectBrowser(),this.bindScrollEvent()},bindScrollEvent:function(){var e=this;tool.registerMouseScrollEvent(function(t,r){var o=document.querySelectorAll("caption")[e.currentPage-1].scrollTop;0===o&&(r>0?e.previousPage():e.nextPage())})},detectBrowser:function(){var e=navigator.userAgent;if(-1!==e.indexOf("MSIE")){var t=/MSIE\s*(\d\.[^;])+/g,r=t.exec(e);r&&(this.browser={name:"IE",version:r[1]})}},changeArrow:function(){1===this.currentPage?(this.showArrowUp=!0,this.showArrowDown=!1):this.currentPage===this.totalPages?(this.showArrowUp=!1,this.showArrowDown=!0):(this.showArrowUp=!0,this.showArrowDown=!0)},previousPage:function(){this.currentPage<=1||this.scrollPage("up")},nextPage:function(e){this.currentPage>=this.totalPages||(this.scrollPage("down"),e&&this.lazyLoadImages())},scrollPage:function(e){var t=window.innerHeight,r=document.querySelectorAll("caption"),o=null,a=null;"down"===e?(o=r[this.currentPage-1],a=r[this.currentPage],"undefined"!=typeof $?($(o).animate({top:-t},1e3*this.pageScrollInterval),$(a).animate({top:0},1e3*this.pageScrollInterval)):(o.style.top=-t+"px",a.style.top="0px")):"up"===e&&(o=r[this.currentPage-1],a=r[this.currentPage-2],"undefined"!=typeof $?($(o).animate({top:t},1e3*this.pageScrollInterval),$(a).animate({top:0},1e3*this.pageScrollInterval)):(o.style.top=t+"px",a.style.top="0px")),(!this.browser||"IE"===this.browser.name&&this.browser.version>9)&&(o.style.transition="top "+this.pageScrollInterval+"s",o.style["-moz-transition"]="top "+this.pageScrollInterval+"s",o.style["-webkit-transition"]="top "+this.pageScrollInterval+"s",o.style["-o-transition"]="top "+this.pageScrollInterval+"s",a.style.transition="top "+this.pageScrollInterval+"s",a.style["-moz-transition"]="top "+this.pageScrollInterval+"s",a.style["-webkit-transition"]="top "+this.pageScrollInterval+"s",a.style["-o-transition"]="top "+this.pageScrollInterval+"s"),"down"===e?this.currentPage+=1:"up"===e&&(this.currentPage-=1);var i=this;setTimeout(function(){i.changeArrow(),m.redraw()},1e3*this.pageScrollInterval)},lazyLoadImages:function(){var e=document.querySelectorAll("img[data-url]"),t=this;if(e.length>0){var r=null,o=[];[].slice.call(e,0,e.length).forEach(function(e){var a=e.getAttribute("data-url"),i=t.imageLoaded[a];"undefined"==typeof i||i||-1!==o.indexOf(a,0)||(r=new Image,r.src=a,r.onload=function(){t.imageLoaded[a]=!0,setTimeout(m.redraw,1e3*t.pageScrollInterval)},r.onerror=function(){console.log("Image url("+a+") load error!")},o.push(a))})}}},controller:function(){var t=e.viewModel;return t.init(),t},view:function(e){var t=location.href,r=-1!==t.indexOf("http");return[m("header",[m("div.left",[m("span.logo"),m("span.txt","DIEXT LAB")]),m("div.right",m("nav",[m("li","WORKS"),m("li","ABOUT")])),e.showArrowDown?m("div.scrollDown",{onclick:e.previousPage.bind(e)},m("span.icon")):"",m("div.clear")]),m("caption.p1",m("div.main",{onmousemove:function(e){var t=this.querySelector(".card"),r=-((window.innerWidth/2-e.pageX)/20),o=-((window.innerHeight/2-e.pageY)/10);t.setAttribute("style","transform:rotateY("+r+"deg) rotateX("+o+"deg);-webkit-transform: rotateY("+r+"deg) rotateX("+o+"deg);-moz-transform: rotateY("+r+"deg) rotateX("+o+"deg)")}},m("div.card",[m("img.frame",{src:"./images/p1.png"}),m("img.john",{src:"./images/p2.png"}),m("img.lower",{src:"./images/p3.png"})]))),m("caption.p2",e.p2Images.map(function(t){return m("div.row",t.map(function(t){var o={},a=!1;return t?r&&!e.imageLoaded[t]?(a=!0,o["data-url"]=t):o.src=t:a=!0,m("div.img",[a?m("span.loading","Loading"):"",m("img",o)])}))})),m("footer",[e.showArrowUp?m("div.scrollUp",{onclick:e.nextPage.bind(e,r)},m("span.icon")):""])]}};m.mount(document.querySelector(".diext"),e)}();