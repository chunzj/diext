!function(){function e(){var e=0;t.forEach(function(t,n){e=n*t.length,t.forEach(function(t,n){var a=i[t],l=e+n;if(o[l]=[],a)for(var s=1;s<=r[l];s++)o[l].push("./images/"+a+"_"+(10>s?"0"+s:s)+".jpg")}),e++})}var t=[["./images/sample_1.jpg","./images/sample_2.jpg","./images/sample_3.jpg"],["./images/sample_4.jpg","./images/sample_5.jpg",""]],i={"./images/sample_1.jpg":"","./images/sample_2.jpg":"guogan","./images/sample_3.jpg":"","./images/sample_4.jpg":"","./images/sample_5.jpg":"banyan"},n={"./images/sample_1.jpg":!1,"./images/sample_2.jpg":!1,"./images/sample_3.jpg":!1,"./images/sample_4.jpg":!1,"./images/sample_5.jpg":!1,"./images/banyan_01.jpg":!1,"./images/banyan_02.jpg":!1,"./images/banyan_03.jpg":!1,"./images/banyan_04.jpg":!1,"./images/banyan_05.jpg":!1,"./images/banyan_06.jpg":!1,"./images/banyan_07.jpg":!1,"./images/guogan_01.jpg":!1,"./images/guogan_02.jpg":!1,"./images/guogan_03.jpg":!1,"./images/guogan_04.jpg":!1,"./images/guogan_05.jpg":!1,"./images/guogan_06.jpg":!1},a={"./images/banyan_01.jpg":{height:"342"},"./images/banyan_02.jpg":{height:"760"},"./images/banyan_03.jpg":{height:"1596"},"./images/banyan_04.jpg":{height:"699"},"./images/banyan_05.jpg":{height:"977"},"./images/banyan_06.jpg":{height:"658"},"./images/banyan_07.jpg":{height:"1447"},"./images/guogan_01.jpg":{height:"996"},"./images/guogan_02.jpg":{height:"896"},"./images/guogan_03.jpg":{height:"785"},"./images/guogan_04.jpg":{height:"1096"},"./images/guogan_05.jpg":{height:"720"},"./images/guogan_06.jpg":{height:"843"}},o=[],r=[0,6,0,0,7];e(),window.IMG_MANAGER={detailImages:o,thumbImages:t,imageCache:n,imageSize:a}}(),function(){function e(){var e=document.querySelector(".diext"),n=e.classList;tool.isPhone()?(n.add("diext-m"),n.remove("diext-p"),m.mount(e,i)):(n.add("diext-p"),n.remove("diext-m"),m.mount(e,t))}var t={initialized:!1,viewModel:{showArrowUp:!1,showArrowDown:!1,currentPage:1,totalPages:2,pageScrollInterval:1,browser:null,os:null,scrollDone:!0,worksLinkActive:!1,aboutLinkActive:!1,seeImgDetail:!1,showDeleteIcon:!1,showLinkIcon:!1,currentImg:0,init:function(){this.detectBrowser(),tool.isPhone()||(this.changeArrow(),this.bindScrollEvent(),this.bindResizeEvent())},showCaptions:function(e){var t=document.querySelectorAll(".diext caption");[].slice.call(t,0,t.length).forEach(function(t){t.style.opacity=e?1:0})},bindResizeEvent:function(){var e=this,t=!1;tool.addEvent(window,"resize",function(){if(!tool.isPhone()){var i=null;i||(i=document.querySelector(".diext header")),e.showCaptions(!1),t&&(clearTimeout(t),t=null),i&&(t=setTimeout(function(){e.showCaptions(!0),e.currentPage=1,e.worksLinkActive=!1,e.aboutLinkActive=!1,e.showDeleteIcon=!1,e.changeArrow(),e.adjustHeaderWidth(i),e.adjustImgContainerHeight(),m.redraw()},100))}})},adjustHeaderWidth:function(e){var t=window.innerWidth,i=16;"mac"===this.os&&(i=12),e.style.width=100*(1-i/t).toFixed(4)+"%"},adjustImgContainerHeight:function(){var e=document.body.clientWidth,t=document.querySelectorAll(".diext-p .default");[].slice.call(t,0,t.length).forEach(function(t){var i=Number(t.getAttribute("height")),n=Number(t.getAttribute("width")),a=t.parentNode,o=a.querySelectorAll(".img"),r=a.querySelectorAll("img"),l=Number(t.getAttribute("scale"));r.length===o.length&&(t.style.height=(e*l*i/n).toFixed(2)+"px")})},bindScrollEvent:function(){var e=this;tool.registerMouseScrollEvent(function(t,i){if(!tool.isPhone()){var n=document.querySelectorAll("caption")[e.currentPage-1].scrollTop;0===n&&(i>0?e.previousPage():e.nextPage(),m.redraw())}})},detectBrowser:function(){var e=navigator.userAgent;if(-1!==e.indexOf("MSIE")){var t=/MSIE\s*(\d\.[^;])+/g,i=t.exec(e);i&&(this.browser={name:"IE",version:i[1]})}-1!==e.toLowerCase().indexOf("windows")?this.os="windows":-1!==e.toLowerCase().indexOf("mac")&&(this.os="mac")},changeArrow:function(){1===this.currentPage?(this.showArrowUp=!0,this.showArrowDown=!1):this.currentPage===this.totalPages?(this.showArrowUp=!1,this.showArrowDown=!0):(this.showArrowUp=!0,this.showArrowDown=!0)},deleteImageDetail:function(){this.preImgControl(),this.paramControl(!1),this.aboutLinkActive=!1,this.showDeleteIcon=!1,this.showLinkIcon=!1,m.redraw(!0)},linkToOther:function(){},previousPage:function(){return this.currentPage<=1?void(this.worksLinkActive=!1):void this.scrollPage("up")},nextPage:function(){this.currentPage>=this.totalPages||(this.worksLinkActive=!0,this.scrollPage("down"),this.adjustImgContainerHeight())},scrollPage:function(e){if(this.scrollDone&&!this.seeImgDetail){this.showArrowUp=!1,this.showArrowDown=!1,this.scrollDone=!1;var t=window.innerHeight,i=document.querySelectorAll("caption"),n=null,a=null;"down"===e?(n=i[this.currentPage-1],a=i[this.currentPage],"undefined"!=typeof $?($(n).animate({top:-t},1e3*this.pageScrollInterval),$(a).animate({top:0},1e3*this.pageScrollInterval)):(n.style.top=-t+"px",a.style.top="0px")):"up"===e&&(n=i[this.currentPage-1],a=i[this.currentPage-2],"undefined"!=typeof $?($(n).animate({top:t},1e3*this.pageScrollInterval),$(a).animate({top:0},1e3*this.pageScrollInterval)):(n.style.top=t+"px",a.style.top="0px")),this.domAnimation(n,"top"),this.domAnimation(a,"top");var o=this;setTimeout(function(){"down"===e?o.currentPage+=1:"up"===e&&(o.currentPage-=1),1===o.currentPage&&(o.worksLinkActive=!1),o.changeArrow(),o.scrollDone=!0,"down"===e&&o.lazyLoadImages("caption.p2",!0),m.redraw()},1e3*this.pageScrollInterval)}},domAnimation:function(e,t,i,n){"undefined"==typeof n&&(n=!0),2===arguments.length?"string"==typeof arguments[1]?(t=arguments[1],i=this.pageScrollInterval):"number"==typeof arguments[1]&&(i=arguments[1],t="all"):1===arguments.length&&(t="all",i=this.pageScrollInterval),(!n||!this.browser||"IE"===this.browser.name&&this.browser.version>9)&&(e.style.transition=t+" "+i+"s",e.style["-moz-transition"]=t+" "+i+"s",e.style["-webkit-transition"]=t+" "+i+"s",e.style["-o-transition"]=t+" "+i+"s")},lazyLoadImages:function(e,t){var i=document.querySelectorAll(e+" img[data-url]"),n=this,a=[];if(i.length>0){var o=[],r=m.deferred();[].slice.call(i,0,i.length).forEach(function(e){var i=e.getAttribute("data-url"),l=IMG_MANAGER.imageCache[i];return a.push(r.promise),"undefined"==typeof l||l||-1!==o.indexOf(i,0)?void r.resolve():(n.loadImg(i,r,t),void o.push(i))})}return a},loadImg:function(e,t,i){var n=new Image,a=this;n.src=e,n.onload=function(){IMG_MANAGER.imageCache[e]=!0,i&&setTimeout(m.redraw,1e3*a.pageScrollInterval),t.resolve()},n.onerror=function(){console.log("Image url("+e+") load error!"),t.reject()}},preImgControl:function(e){this.currentImg=e||0,m.redraw(!0)},popImageDetail:function(e,t,i){if(t){i?(this.preImgControl(e),m.sync(this.lazyLoadImages(".img-detail",!0))):this.aboutLinkActive=!0,this.paramControl(!0),m.redraw(!0)}},paramControl:function(e){var t=document.querySelector(".diext-p .img-detail");e?(this.adjustImgContainerHeight(),t.style.zIndex="766","undefined"!=typeof $?$(t).animate({opacity:1},1e3*this.pageScrollInterval):t.style.opacity=1,this.domAnimation(t),setTimeout(function(){t.scrollTop=0},10*this.pageScrollInterval)):(t.style.opacity=0,t.style.zIndex="744"),this.showArrowDown=!e,this.showArrowUp=!e,this.showDeleteIcon=e,this.showLinkIcon=e,this.seeImgDetail=e,e||this.changeArrow()},backToMain:function(){this.deleteImageDetail(),this.previousPage()},imageScale:function(e,t,i,n){if(i&&n){var a=1.01,o=1,r=1;t?(a=1.2,o=1.2,r=1.2,e.style.zIndex=999):e.style.zIndex="inherit",e.style.transform="scale("+a+","+o+")",e.style["-moz-transform"]="scale("+a+","+o+")",e.style["-webkit-transform"]="scale("+a+","+o+")",e.style["-o-transform"]="scale("+a+","+o+")",this.domAnimation(e,1.5)}},bindScaleEvent:function(e,t,i){if(!t.bindEvent){var n=this;t.bindEvent=!0,t.onmouseover=function(){n.imageScale.call(n,this,!0,!!e,i)},t.onmouseout=function(){n.imageScale.call(n,this,!1,!!e,i)}}}},controller:function(){var e=t.viewModel;return e.init(),e},imageView:function(e,t,i,n){var a="./images/balckline.jpg",o=!0,r={};return t&&IMG_MANAGER.imageCache[t]&&(a=t,o=!1),r.src=a,t&&o&&(r["data-url"]=t),r.config=function(i){var a=i.parentNode;o||2===e.currentPage&&("undefined"!=typeof $&&$(i).animate({opacity:1},1e3*e.pageScrollInterval),setTimeout(function(){var o=a.querySelector(".loading");o&&(o.style.display="none"),i.style.opacity=1,e.bindScaleEvent.call(e,t,i,n)},1e3*e.pageScrollInterval),e.domAnimation(i))},m("div.img"+(o?".default":""),i,[m("span.loading","Loading"),m("img",r)])},view:function(e){var i=e.seeImgDetail||2===e.currentPage;return[m("header"+(i?".white-bg":""),{config:function(t){i&&e.adjustHeaderWidth.call(e,t)}},[m("div.left",{onclick:e.backToMain.bind(e)}),m("div.right",m("nav",[m("a"+(e.worksLinkActive&&e.scrollDone?".active":""),{onclick:function(){e.worksLinkActive=!0,e.nextPage.call(e)}},"WORKS"),m("a"+(e.aboutLinkActive?".active":""),{onclick:e.popImageDetail.bind(e,null,!0,!1)},"ABOUT")])),e.showArrowDown?m("div.scrollDown",{onclick:e.previousPage.bind(e)},m("span.icon")):"",e.showDeleteIcon?m("div.deleteIcon",{onclick:e.deleteImageDetail.bind(e)},m("span.icon")):"","",m("div.clear")]),m("caption.p1",m("div.main",{onmousemove:function(e){var t=this.querySelector(".card"),i=-((window.innerWidth/2-e.pageX)/20),n=(window.innerHeight/2-e.pageY)/10;t.setAttribute("style","transform:rotateY("+i+"deg) rotateX("+n+"deg);-webkit-transform: rotateY("+i+"deg) rotateX("+n+"deg);-moz-transform: rotateY("+i+"deg) rotateX("+n+"deg)")}},m("div.card",[m("img.frame",{src:"./images/bigword.svg"}),m("img.john",{src:"./images/lines.svg"}),m("img.lower",{src:"./images/smallword.svg"})]))),m("caption.p2",IMG_MANAGER.thumbImages.map(function(i,n){return m("div.row",i.map(function(a,o){return t.imageView(e,a,{onclick:e.popImageDetail.bind(e,n*i.length+o,!!a,!0),height:"438",width:"640",scale:"0.333333"},!0)}))})),m("div.img-detail",e.aboutLinkActive?m("div.main.about",[m("h3","About DIEXT"),m("p.desc","DIEXT是一家互联网设计公司，创新与创意是DIEXT设计最核心的竞争力。同时在用户体验方面积累了多年的经验，为客户打造充满美而惊喜的产品体验与服务。我们的业务范围以界面为源点，衍生出用户体验设计、UI视觉设计、营销设计等，覆盖在流行的各种平台"),m("p.contact",[m("span","合作或咨询，请发邮件至  "),m("a",{href:"mailto:diecxters@foxmail.com"},m("strong","diecxters@foxmail.com"))])]):m("div.main",IMG_MANAGER.detailImages[e.currentImg].map(function(i){return t.imageView(e,i,{height:IMG_MANAGER.imageSize[i].height,width:IMG_MANAGER.imageSize[i].width||"1080",scale:"0.5"},!1)}))),m("footer",[e.showArrowUp?m("div.scrollUp",{onclick:e.nextPage.bind(e)},m("span.icon")):""])]}},i={isInitialized:!1,init:function(){var e={},t=null,n=i.viewModel;tool.addEvent(window,"scroll",function(){if(i.viewModel.enableScroll){var a=document.querySelector("body").scrollTop,o=window.innerHeight;100>a&&n.activeWorks&&(n.activeWorks=!1,m.redraw());var r=document.querySelectorAll(".diext-m img[data-url]");[].slice.call(r,0,r.length).forEach(function(i){var n=i.getAttribute("data-url");if(!e[n]&&!IMG_MANAGER.imageCache[n]){var r=i.parentNode,l=r.offsetTop;a+o>l+50&&(e[n]=!0,t=new Image,t.src=n,t.onload=function(){IMG_MANAGER.imageCache[n]=!0,r.querySelector(".loading").style.display="none",m.redraw()},t.onerror=function(){console.log("Image url("+n+") load error!")})}})}}),tool.addEvent(window,"resize",function(){tool.isPhone()&&(n.enableScroll=!0,n.activeWorks=!1,n.activeAbout=!1,n.currentThumb=-1)})},viewModel:{currentThumb:-1,enableScroll:!0,activeWorks:!1,activeAbout:!1,lastScrollTop:0,backToMain:function(){this.activeWorks=!1,this.lastScrollTop=0,this.popImageDetail(!1,this.currentThumb),document.body.scrollTop=0},linkToAbout:function(){this.activeWorks=!0,this.activeAbout?this.popImageDetail(!1,-1):this.popImageDetail(!1,this.currentThumb),this.lastScrollTop=document.getElementById("thumb").offsetTop},popImageDetail:function(e,i){var n=document.querySelector(".diext-m .img-detail");if(e)this.currentThumb=i,this.lastScrollTop=document.body.scrollTop,document.body.scrollTop=0,-1===i?(this.activeAbout=!0,this.enableScroll=!1):m.redraw(!0),this.showDetail(!0),n.style.zIndex="120",n.style.opacity=1,t.viewModel.domAnimation.call(t.viewModel,n),this.adjustDetailHeight();else{this.showDetail(!1),this.activeAbout=!1,this.enableScroll=!0,n.style.opacity=0,n.style.zIndex="100";var a=this;setTimeout(function(){document.body.scrollTop=a.lastScrollTop},10*t.viewModel.pageScrollInterval)}},adjustDetailHeight:function(){if(-1===this.currentThumb||0===IMG_MANAGER.detailImages[this.currentThumb].length)document.querySelector(".diext-m .img-detail").style.height=window.innerHeight+"px";else{var e=document.querySelectorAll(".diext-m .img-detail .default");e.length&&[].slice.call(e,0,e.length).forEach(function(e){var t=e.querySelector("img").getAttribute("data-url");t&&!IMG_MANAGER.imageCache[t]&&(e.style.height=e.getAttribute("height")+"px")})}},showDetail:function(e){var t=document.getElementById("main"),i=document.getElementById("thumb");t.style.display=e?"none":"block",i.style.display=e?"none":"block"}},controller:function(){return i.isInitialized||i.init(),i.viewModel},view:function(e){var t=0;return[m("div#main.main",[m("header",[m("div.left.logo",{onclick:e.backToMain.bind(e)}),m("nav.right",[m("a"+(e.activeWorks?".active":""),{href:"#thumb"},"WORKS"),m("a"+(e.activeAbout?".active":""),{onclick:e.popImageDetail.bind(e,!0,-1)},"ABOUT")]),m("di.clear")]),m("div.content",m("div.imgs",[m("img.target",{src:"./images/target.png"}),m("img.desc",{src:"./images/desc.png"})]))]),m("div#thumb.thumb",[m("div.title",{onclick:e.backToMain.bind(e)},"WORKS"),m("div.content",IMG_MANAGER.thumbImages.map(function(i,n){return t=n*i.length,i.map(function(i,n){t+=n;var a="./images/balckline.jpg",o=!0,r={};return i&&IMG_MANAGER.imageCache[i]&&(a=i,o=!1),r.src=a,i&&o&&(r["data-url"]=i),o||(r.onclick=e.popImageDetail.bind(e,!0,t)),m("div.img"+(o?".default":""),[o?m("span.loading","Loading"):"",m("img",r)])})}))]),m("div.img-detail",[m("header",[m("div.left.logo",{onclick:e.backToMain.bind(e)}),m("div.left.delete-icon",{onclick:e.popImageDetail.bind(e,!1)},m("span.icon")),m("nav.right",[m("a"+(e.activeWorks?".active":""),{onclick:e.linkToAbout.bind(e)},"WORKS"),m("a"+(e.activeAbout?".active":""),{onclick:e.popImageDetail.bind(e,!0,-1)},"ABOUT")]),m("di.clear")]),m("div.content"+(-1!==e.currentThumb?".detail":".about"),-1!==e.currentThumb?IMG_MANAGER.detailImages[e.currentThumb].map(function(e){var t="./images/balckline.jpg",i=!0,n={},a={};return e&&IMG_MANAGER.imageCache[e]&&(t=e,i=!1),n.src=t,e&&i&&(n["data-url"]=e),IMG_MANAGER.imageSize[e]&&(a.height=IMG_MANAGER.imageSize[e].height),m("div.img"+(i?".default":""),a,[i?m("span.loading","Loading"):"",m("img",n)])}):[m("h3","About DIEXT"),m("p.desc","DIEXT是一家互联网设计公司，创新与创意是DIEXT设计最核心的竞争力。同时在用户体验方面积累了多年的经验，为客户打造充满美而惊喜的产品体验与服务。我们的业务范围以界面为源点，衍生出用户体验设计、UI视觉设计、营销设计等，覆盖在流行的各种平台"),m("p.contact",[m("span","合作或咨询，请发邮件至  "),m("a",{href:"mailto:diecxters@foxmail.com"},m("strong","diecxters@foxmail.com"))])])])]}};e(),tool.addEvent(window,"resize",function(){e()})}();