!function(){function e(){var e=document.querySelector(".diext"),t=e.classList;tool.isPhone()?(t.add("diext-m"),t.remove("diext-p"),m.mount(e,o)):(t.add("diext-p"),t.remove("diext-m"),m.mount(e,n))}var t=[["./images/sample_1.jpg","./images/sample_2.jpg","./images/sample_3.jpg"],["./images/sample_4.jpg","./images/sample_5.jpg",""],["./images/sample_4.jpg","",""],["","","./images/sample_4.jpg"]],i={"./images/sample_1.jpg":!0,"./images/sample_2.jpg":!1,"./images/sample_3.jpg":!1,"./images/sample_4.jpg":!1,"./images/sample_5.jpg":!1,"./images/1080banyan_01_01.jpg":!1,"./images/1080banyan_01_02.jpg":!1,"./images/1080banyan_01_03.jpg":!1,"./images/1080banyan_01_04.jpg":!1,"./images/1080banyan_01_05.jpg":!1,"./images/1080banyan_01_06.jpg":!1,"./images/1080banyan_01_07.jpg":!1},n={initialized:!1,viewModel:{sizeImages:{"./images/1080banyan_01_01.jpg":{height:"342"},"./images/1080banyan_01_02.jpg":{height:"760"},"./images/1080banyan_01_03.jpg":{height:"1596"},"./images/1080banyan_01_04.jpg":{height:"699"},"./images/1080banyan_01_05.jpg":{height:"977"},"./images/1080banyan_01_06.jpg":{height:"658"},"./images/1080banyan_01_07.jpg":{height:"1447"}},p2Images:t,p3Images:[],p3ImagesNum:[7],showArrowUp:!1,showArrowDown:!1,currentPage:1,totalPages:2,pageScrollInterval:1,browser:null,os:null,scrollDone:!0,worksLinkActive:!1,seeImgDetail:!1,imgDetailDone:!1,showDeleteIcon:!1,showLinkIcon:!1,currentImg:0,init:function(){this.initImgResource(),this.detectBrowser(),tool.isPhone()||(this.changeArrow(),this.bindScrollEvent(),this.bindResizeEvent())},showCaptions:function(e){var t=document.querySelectorAll(".diext caption");[].slice.call(t,0,t.length).forEach(function(t){t.style.opacity=e?1:0})},bindResizeEvent:function(){var e=this,t=!1;tool.addEvent(window,"resize",function(){var i=null;i||(i=document.querySelector(".diext header")),e.showCaptions(!1),t&&(clearTimeout(t),t=null),i&&(t=setTimeout(function(){e.showCaptions(!0),e.currentPage=1,e.worksLinkActive=!1,e.changeArrow(),e.adjustHeaderWidth(i),m.redraw()},100))})},adjustHeaderWidth:function(e){var t=window.innerWidth,i=16;"mac"===this.os&&(i=12),e.style.width=100*(1-i/t).toFixed(4)+"%"},initImgResource:function(){var e=0,t=this;this.p2Images.forEach(function(i,n){e=n*i.length,i.forEach(function(i,n){var o=e+n;t.p3Images[o]=[];for(var a=1;a<=t.p3ImagesNum[o];a++)t.p3Images[o].push("./images/1080banyan_"+(10>o?"0"+(o+1):o+1)+"_"+(10>a?"0"+a:a)+".jpg")}),e++})},bindScrollEvent:function(){var e=this;tool.registerMouseScrollEvent(function(t,i){var n=document.querySelectorAll("caption")[e.currentPage-1].scrollTop;0===n&&(i>0?e.previousPage():e.nextPage(e.isServer()),m.redraw())})},detectBrowser:function(){var e=navigator.userAgent;if(-1!==e.indexOf("MSIE")){var t=/MSIE\s*(\d\.[^;])+/g,i=t.exec(e);i&&(this.browser={name:"IE",version:i[1]})}-1!==e.toLowerCase().indexOf("windows")?this.os="windows":-1!==e.toLowerCase().indexOf("mac")&&(this.os="mac")},changeArrow:function(){1===this.currentPage?(this.showArrowUp=!0,this.showArrowDown=!1):this.currentPage===this.totalPages?(this.showArrowUp=!1,this.showArrowDown=!0):(this.showArrowUp=!0,this.showArrowDown=!0)},deleteImageDetail:function(){this.preImgControl(),this.paramControl(!1)},linkToOther:function(){},previousPage:function(){return this.currentPage<=1?void(this.worksLinkActive=!1):void this.scrollPage("up")},nextPage:function(e){this.currentPage>=this.totalPages||(this.scrollPage("down"),e&&this.lazyLoadImages("caption.p2",!0))},scrollPage:function(e){if(this.scrollDone&&!this.seeImgDetail){this.showArrowUp=!1,this.showArrowDown=!1,this.scrollDone=!1;var t=window.innerHeight,i=document.querySelectorAll("caption"),n=null,o=null;"down"===e?(n=i[this.currentPage-1],o=i[this.currentPage],"undefined"!=typeof $?($(n).animate({top:-t},1e3*this.pageScrollInterval),$(o).animate({top:0},1e3*this.pageScrollInterval)):(n.style.top=-t+"px",o.style.top="0px")):"up"===e&&(n=i[this.currentPage-1],o=i[this.currentPage-2],"undefined"!=typeof $?($(n).animate({top:t},1e3*this.pageScrollInterval),$(o).animate({top:0},1e3*this.pageScrollInterval)):(n.style.top=t+"px",o.style.top="0px")),this.domAnimation(n,"top"),this.domAnimation(o,"top");var a=this;setTimeout(function(){"down"===e?a.currentPage+=1:"up"===e&&(a.currentPage-=1),1===a.currentPage&&(a.worksLinkActive=!1),a.changeArrow(),a.scrollDone=!0,m.redraw()},1e3*this.pageScrollInterval)}},domAnimation:function(e,t,i){2===arguments.length?"string"==typeof arguments[1]?(t=arguments[1],i=this.pageScrollInterval):"number"==typeof arguments[1]&&(i=arguments[1],t="all"):1===arguments.length&&(t="all",i=this.pageScrollInterval),(!this.browser||"IE"===this.browser.name&&this.browser.version>9)&&(e.style.transition=t+" "+i+"s",e.style["-moz-transition"]=t+" "+i+"s",e.style["-webkit-transition"]=t+" "+i+"s",e.style["-o-transition"]=t+" "+i+"s")},lazyLoadImages:function(e,t){var n=document.querySelectorAll(e+" img[data-url]"),o=this,a=[];if(n.length>0){var r=[],s=m.deferred();[].slice.call(n,0,n.length).forEach(function(e){var n=e.getAttribute("data-url"),l=i[n];return a.push(s.promise),"undefined"==typeof l||l||-1!==r.indexOf(n,0)?void s.resolve():(o.loadImg(n,s,t),void r.push(n))})}return a},loadImg:function(e,t,n){var o=new Image,a=this;o.src=e,o.onload=function(){i[e]=!0,n&&setTimeout(m.redraw,1e3*a.pageScrollInterval),t.resolve()},o.onerror=function(){console.log("Image url("+e+") load error!"),t.reject()}},preImgControl:function(e){this.currentImg=e||0,m.redraw(!0)},popImageDetail:function(e,t,i){if(i){var n=this;this.preImgControl(e),t?m.sync(this.lazyLoadImages(".img-detail",!0)).then(function(){n.imgDetailDone=!0}):this.imgDetailDone=!0,this.paramControl(!0)}},paramControl:function(e){var t=document.querySelector(".diext .img-detail");e?(t.style.zIndex="766","undefined"!=typeof $?$(t).animate({opacity:1},1e3*this.pageScrollInterval):t.style.opacity=1,this.domAnimation(t,"opacity"),setTimeout(function(){t.scrollTop=0},10*this.pageScrollInterval)):(t.style.opacity=0,t.style.zIndex="744"),this.showArrowDown=!e,this.showArrowUp=!e,this.showDeleteIcon=e,this.showLinkIcon=e,this.seeImgDetail=e,e||this.changeArrow()},isServer:function(){var e=location.href;return-1!==e.indexOf("http")},backToMain:function(){this.deleteImageDetail(),this.previousPage()},imageScale:function(e,t,i,n){if(i&&n){var o=1,a=1,r=1;t?(o=1.5,a=1.5,r=1.5,e.style.zIndex=999):e.style.zIndex="inherit",e.style.transform="scale("+o+","+a+")",e.style["-moz-transform"]="scale("+o+","+a+")",e.style["-webkit-transform"]="scale("+o+","+a+")",e.style["-o-transform"]="scale("+o+","+a+")",this.domAnimation(e,1.5)}}},controller:function(){var e=n.viewModel;return e.init(),e},imageView:function(e,t,n,o,a){var r={},s=!1;return t?n&&!i[t]?(s=!0,r["data-url"]=t):r.src=t:s=!0,r.config=function(t){var i=t.parentNode;s||(i.style.height="auto",i.style.marginLeft="0",2!==e.currentPage||t.animationDone||(t.animationDone=!1,"undefined"!=typeof $?$(t).animate({opacity:1},1e3*e.pageScrollInterval):t.style.opacity=1,e.domAnimation(t),setTimeout(function(){i.querySelector(".loading").style.display="none"},100*e.pageScrollInterval),t.animationDone=!0))},r.onmouseover=function(){e.imageScale.call(e,this,!0,!!t,a)},r.onmouseout=function(){e.imageScale.call(e,this,!1,!!t,a)},m("div.img"+(s?".default":""),o,[m("span.loading","Loading"),m("img"+(s?"":".invisible"),r)])},view:function(e){var t=e.isServer(),i=e.seeImgDetail||2===e.currentPage;return[m("header"+(i?".white-bg":""),{config:function(t){i&&e.adjustHeaderWidth.call(e,t)}},[m("div.left",[m("span.logo",{onclick:e.backToMain.bind(e)}),m("span.txt",{onclick:e.backToMain.bind(e)},"DIEXT LAB")]),m("div.right",m("nav",[m("a"+(e.worksLinkActive&&e.scrollDone?".active":""),{onclick:function(){e.worksLinkActive=!0,e.nextPage.call(e,t)}},"WORKS"),m("a","ABOUT")])),e.showArrowDown?m("div.scrollDown",{onclick:e.previousPage.bind(e)},m("span.icon")):"",e.showDeleteIcon?m("div.deleteIcon",{onclick:e.deleteImageDetail.bind(e)},m("span.icon")):"",e.showLinkIcon?m("div.linkIcon",{onclick:e.linkToOther.bind(e)},m("span.icon")):"",m("div.clear")]),m("caption.p1",m("div.main",{onmousemove:function(e){var t=this.querySelector(".card"),i=-((window.innerWidth/2-e.pageX)/20),n=(window.innerHeight/2-e.pageY)/10;t.setAttribute("style","transform:rotateY("+i+"deg) rotateX("+n+"deg);-webkit-transform: rotateY("+i+"deg) rotateX("+n+"deg);-moz-transform: rotateY("+i+"deg) rotateX("+n+"deg)")}},m("div.card",[m("img.frame",{src:"./images/bigword.svg"}),m("img.john",{src:"./images/lines.svg"}),m("img.lower",{src:"./images/smallword.svg"})]))),m("caption.p2",e.p2Images.map(function(i,o){return m("div.row",i.map(function(a,r){return n.imageView(e,a,t,{onclick:e.popImageDetail.bind(e,o*i.length+r,t,!!a),height:"438",width:"640",scale:"0.333333"},!0)}))})),m("div.img-detail"+(e.seeImgDetail?e.imgDetailDone?".default-color":".black-bg":".default-color"),[m("div.top"),m("div.main",e.p3Images[e.currentImg].map(function(i){return n.imageView(e,i,t,{height:e.sizeImages[i].height,width:e.sizeImages[i].width||"1080",scale:"0.5"},!1)}))]),m("footer",[e.showArrowUp?m("div.scrollUp",{onclick:e.nextPage.bind(e,t)},m("span.icon")):""])]}},o={isInitialized:!1,init:function(){var e={},t=null;tool.addEvent(window,"scroll",function(){var n=document.querySelector("body").scrollTop,o=window.innerHeight,a=document.querySelectorAll(".diext-m img[data-url]");[].slice.call(a,0,a.length).forEach(function(a){var r=a.getAttribute("data-url");if(!e[r]&&!i[r]){var s=a.parentNode,l=s.offsetTop;n+o>l+50&&(e[r]=!0,t=new Image,t.src=r,t.onload=function(){i[r]=!0,m.redraw(),console.log(r+"loaded")},t.onerror=function(){console.log("Image url("+r+") load error!")})}})})},viewModel:{p2Images:t},controller:function(){return o.isInitialized||o.init(),o.viewModel},view:function(e){return[m("div#main.main",[m("header",[m("div.left",m("span.text","DIEXT LAB")),m("nav.right",[m("a",{href:"#thumb"},"WORKS"),m("a","ABOUT")]),m("di.clear")]),m("div.content",m("div.imgs",[m("img.target",{src:"./images/target.png"}),m("img.desc",{src:"./images/desc.png"})]))]),m("div#thumb.thumb",[m("div.title","WORKS"),m("div.content",e.p2Images.map(function(e){return e.map(function(e){var t="./images/balckline.jpg",n=!0,o={};return e&&i[e]&&(t=e,n=!1),o.src=t,e&&n&&(o["data-url"]=e),m("div.img"+(n?".default":""),[n?m("span.loading","Loading"):"",m("img",o)])})}))])]}};e(),tool.addEvent(window,"resize",function(){e()})}();