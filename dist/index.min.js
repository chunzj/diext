!function(){var e={initialized:!1,viewModel:{imageLoaded:{"./images/sample_1.jpg":!1,"./images/sample_2.jpg":!1,"./images/sample_3.jpg":!1,"./images/sample_4.jpg":!1,"./images/sample_5.jpg":!1,"./images/1080banyan_01_01.jpg":!1,"./images/1080banyan_01_02.jpg":!1,"./images/1080banyan_01_03.jpg":!1,"./images/1080banyan_01_04.jpg":!1,"./images/1080banyan_01_05.jpg":!1,"./images/1080banyan_01_06.jpg":!1,"./images/1080banyan_01_07.jpg":!1},sizeImages:{"./images/1080banyan_01_01.jpg":{height:"342"},"./images/1080banyan_01_02.jpg":{height:"760"},"./images/1080banyan_01_03.jpg":{height:"1596"},"./images/1080banyan_01_04.jpg":{height:"699"},"./images/1080banyan_01_05.jpg":{height:"977"},"./images/1080banyan_01_06.jpg":{height:"658"},"./images/1080banyan_01_07.jpg":{height:"1447"}},p2Images:[["./images/sample_1.jpg","./images/sample_2.jpg","./images/sample_3.jpg"],["./images/sample_4.jpg","./images/sample_5.jpg",""],["./images/sample_4.jpg","",""],["","","./images/sample_4.jpg"]],p3Images:[],p3ImagesNum:[7],showArrowUp:!1,showArrowDown:!1,currentPage:1,totalPages:2,pageScrollInterval:1,browser:null,os:null,scrollDone:!0,worksLinkActive:!1,seeImgDetail:!1,imgDetailDone:!1,showDeleteIcon:!1,showLinkIcon:!1,currentImg:0,init:function(){this.initImgResource(),this.changeArrow(),this.detectBrowser(),this.bindScrollEvent(),this.bindResizeEvent()},bindResizeEvent:function(){var e=this,t=!1;tool.addEvent(window,"resize",function(){t&&clearTimeout(t),t=setTimeout(function(){e.currentPage=1,e.worksLinkActive=!1,e.changeArrow(),e.adjustHeaderWidth(),m.redraw()},100)})},adjustHeaderWidth:function(e){var t=window.innerWidth,i=16;"mac"===this.os&&(i=12),e||(e=document.querySelector(".diext header")),e.style.width=100*(1-i/t).toFixed(4)+"%"},initImgResource:function(){var e=0,t=this;this.p2Images.forEach(function(i,n){e=n*i.length,i.forEach(function(i,n){var a=e+n;t.p3Images[a]=[];for(var o=1;o<=t.p3ImagesNum[a];o++)t.p3Images[a].push("./images/1080banyan_"+(10>a?"0"+(a+1):a+1)+"_"+(10>o?"0"+o:o)+".jpg")}),e++})},bindScrollEvent:function(){var e=this;tool.registerMouseScrollEvent(function(t,i){var n=document.querySelectorAll("caption")[e.currentPage-1].scrollTop;0===n&&(i>0?e.previousPage():e.nextPage(e.isServer()),m.redraw())})},detectBrowser:function(){var e=navigator.userAgent;if(-1!==e.indexOf("MSIE")){var t=/MSIE\s*(\d\.[^;])+/g,i=t.exec(e);i&&(this.browser={name:"IE",version:i[1]})}-1!==e.toLowerCase().indexOf("windows")?this.os="windows":-1!==e.toLowerCase().indexOf("mac")&&(this.os="mac")},changeArrow:function(){1===this.currentPage?(this.showArrowUp=!0,this.showArrowDown=!1):this.currentPage===this.totalPages?(this.showArrowUp=!1,this.showArrowDown=!0):(this.showArrowUp=!0,this.showArrowDown=!0)},deleteImageDetail:function(){this.preImgControl(),this.paramControl(!1)},linkToOther:function(){},previousPage:function(){return this.currentPage<=1?void(this.worksLinkActive=!1):void this.scrollPage("up")},nextPage:function(e){this.currentPage>=this.totalPages||(this.scrollPage("down"),e&&this.lazyLoadImages("caption.p2",!0))},scrollPage:function(e){if(this.scrollDone&&!this.seeImgDetail){this.showArrowUp=!1,this.showArrowDown=!1,this.scrollDone=!1;var t=window.innerHeight,i=document.querySelectorAll("caption"),n=null,a=null;"down"===e?(n=i[this.currentPage-1],a=i[this.currentPage],"undefined"!=typeof $?($(n).animate({top:-t},1e3*this.pageScrollInterval),$(a).animate({top:0},1e3*this.pageScrollInterval)):(n.style.top=-t+"px",a.style.top="0px")):"up"===e&&(n=i[this.currentPage-1],a=i[this.currentPage-2],"undefined"!=typeof $?($(n).animate({top:t},1e3*this.pageScrollInterval),$(a).animate({top:0},1e3*this.pageScrollInterval)):(n.style.top=t+"px",a.style.top="0px")),this.domAnimation(n,"top"),this.domAnimation(a,"top");var o=this;setTimeout(function(){"down"===e?o.currentPage+=1:"up"===e&&(o.currentPage-=1),1===o.currentPage&&(o.worksLinkActive=!1),o.changeArrow(),o.scrollDone=!0,m.redraw()},1e3*this.pageScrollInterval)}},domAnimation:function(e,t,i){2===arguments.length?"string"==typeof arguments[1]?(t=arguments[1],i=this.pageScrollInterval):"number"==typeof arguments[1]&&(i=arguments[1],t="all"):1===arguments.length&&(t="all",i=this.pageScrollInterval),(!this.browser||"IE"===this.browser.name&&this.browser.version>9)&&(e.style.transition=t+" "+i+"s",e.style["-moz-transition"]=t+" "+i+"s",e.style["-webkit-transition"]=t+" "+i+"s",e.style["-o-transition"]=t+" "+i+"s")},lazyLoadImages:function(e,t){var i=document.querySelectorAll(e+" img[data-url]"),n=this,a=[];if(i.length>0){var o=[],r=m.deferred();[].slice.call(i,0,i.length).forEach(function(e){var i=e.getAttribute("data-url"),s=n.imageLoaded[i];return a.push(r.promise),"undefined"==typeof s||s||-1!==o.indexOf(i,0)?void r.resolve():(n.loadImg(i,r,t),void o.push(i))})}return a},loadImg:function(e,t,i){var n=new Image,a=this;n.src=e,n.onload=function(){a.imageLoaded[e]=!0,i&&setTimeout(m.redraw,1e3*a.pageScrollInterval),t.resolve()},n.onerror=function(){console.log("Image url("+e+") load error!"),t.reject()}},preImgControl:function(e){this.currentImg=e||0,m.redraw(!0)},popImageDetail:function(e,t,i){if(i){var n=this;this.preImgControl(e),t?m.sync(this.lazyLoadImages(".img-detail",!0)).then(function(){n.imgDetailDone=!0}):this.imgDetailDone=!0,this.paramControl(!0)}},paramControl:function(e){var t=document.querySelector(".diext .img-detail");e?(t.style.zIndex="766","undefined"!=typeof $?$(t).animate({opacity:1},1e3*this.pageScrollInterval):t.style.opacity=1,this.domAnimation(t,"opacity"),setTimeout(function(){t.scrollTop=0},10*this.pageScrollInterval)):(t.style.opacity=0,t.style.zIndex="744"),this.showArrowDown=!e,this.showArrowUp=!e,this.showDeleteIcon=e,this.showLinkIcon=e,this.seeImgDetail=e,e||this.changeArrow()},isServer:function(){var e=location.href;return-1!==e.indexOf("http")},backToMain:function(){this.deleteImageDetail(),this.previousPage()},imageScale:function(e,t,i){if(i){var n=1,a=1,o=1;t?(n=1.5,a=1.5,o=1.5,e.style.zIndex=999):e.style.zIndex="inherit",e.style.transform="scale("+n+","+a+")",e.style["-moz-transform"]="scale("+n+","+a+")",e.style["-webkit-transform"]="scale("+n+","+a+")",e.style["-o-transform"]="scale("+n+","+a+")",this.domAnimation(e,1.5)}}},controller:function(){var t=e.viewModel;return t.init(),t},imageView:function(e,t,i,n){var a={},o=!1;return t?i&&!e.imageLoaded[t]?(o=!0,a["data-url"]=t):a.src=t:o=!0,a.config=function(t){var i=t.parentNode;o||(i.style.height="auto",i.style.marginLeft="0",2===e.currentPage&&("undefined"!=typeof $?$(t).animate({opacity:1},1e3*e.pageScrollInterval):t.style.opacity=1,e.domAnimation(t),setTimeout(function(){i.querySelector(".loading").style.display="none"},1e3*e.pageScrollInterval)))},a.onmouseover=function(){e.imageScale.call(e,this,!0,!!t)},a.onmouseout=function(){e.imageScale.call(e,this,!1,!!t)},m("div.img"+(o?".default":""),n,[m("span.loading","Loading"),m("img"+(o?"":".invisible"),a)])},view:function(t){var i=t.isServer(),n=t.seeImgDetail||2===t.currentPage;return[m("header"+(n?".white-bg":""),{config:function(e){n&&t.adjustHeaderWidth.call(t,e)}},[m("div.left",[m("span.logo",{onclick:t.backToMain.bind(t)}),m("span.txt",{onclick:t.backToMain.bind(t)},"DIEXT LAB")]),m("div.right",m("nav",[m("a"+(t.worksLinkActive&&t.scrollDone?".active":""),{onclick:function(){t.worksLinkActive=!0,t.nextPage.call(t,i)}},"WORKS"),m("a","ABOUT")])),t.showArrowDown?m("div.scrollDown",{onclick:t.previousPage.bind(t)},m("span.icon")):"",t.showDeleteIcon?m("div.deleteIcon",{onclick:t.deleteImageDetail.bind(t)},m("span.icon")):"",t.showLinkIcon?m("div.linkIcon",{onclick:t.linkToOther.bind(t)},m("span.icon")):"",m("div.clear")]),m("caption.p1",m("div.main",{onmousemove:function(e){var t=this.querySelector(".card"),i=-((window.innerWidth/2-e.pageX)/20),n=(window.innerHeight/2-e.pageY)/10;t.setAttribute("style","transform:rotateY("+i+"deg) rotateX("+n+"deg);-webkit-transform: rotateY("+i+"deg) rotateX("+n+"deg);-moz-transform: rotateY("+i+"deg) rotateX("+n+"deg)")}},m("div.card",[m("img.frame",{src:"./images/bigword.svg"}),m("img.john",{src:"./images/lines.svg"}),m("img.lower",{src:"./images/smallword.svg"})]))),m("caption.p2",t.p2Images.map(function(n,a){return m("div.row",n.map(function(o,r){return e.imageView(t,o,i,{onclick:t.popImageDetail.bind(t,a*n.length+r,i,!!o),height:"438",width:"640",scale:"0.333333"})}))})),m("div.img-detail"+(t.seeImgDetail?t.imgDetailDone?".default-color":".black-bg":".default-color"),[m("div.top"),m("div.main",t.p3Images[t.currentImg].map(function(n){return e.imageView(t,n,i,{height:t.sizeImages[n].height,width:t.sizeImages[n].width||"1080",scale:"0.5"})}))]),m("footer",[t.showArrowUp?m("div.scrollUp",{onclick:t.nextPage.bind(t,i)},m("span.icon")):""])]}};m.mount(document.querySelector(".diext"),e)}();