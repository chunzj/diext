!function(){var e={initialized:!1,viewModel:{imageLoaded:{"./images/sample_1.jpg":!1,"./images/sample_2.jpg":!1,"./images/sample_3.jpg":!1,"./images/sample_4.jpg":!1,"./images/sample_5.jpg":!1},p2Images:[["./images/sample_1.jpg","./images/sample_2.jpg","./images/sample_3.jpg"],["./images/sample_4.jpg","./images/sample_5.jpg",""],["./images/sample_1.jpg","./images/sample_2.jpg","./images/sample_3.jpg"],["./images/sample_1.jpg","./images/sample_2.jpg","./images/sample_3.jpg"]],showArrowUp:!1,showArrowDown:!1,currentPage:1,totalPages:2,pageScrollInterval:1,browser:null,scrollDone:!0,worksLinkActive:!1,init:function(){this.changeArrow(),this.detectBrowser(),this.bindScrollEvent()},bindScrollEvent:function(){var e=this;tool.registerMouseScrollEvent(function(t,r){var o=document.querySelectorAll("caption")[e.currentPage-1].scrollTop;0===o&&(r>0?e.previousPage():e.nextPage(),m.redraw())})},detectBrowser:function(){var e=navigator.userAgent;if(-1!==e.indexOf("MSIE")){var t=/MSIE\s*(\d\.[^;])+/g,r=t.exec(e);r&&(this.browser={name:"IE",version:r[1]})}},changeArrow:function(){1===this.currentPage?(this.showArrowUp=!0,this.showArrowDown=!1):this.currentPage===this.totalPages?(this.showArrowUp=!1,this.showArrowDown=!0):(this.showArrowUp=!0,this.showArrowDown=!0)},previousPage:function(){return this.currentPage<=1?void(this.worksLinkActive=!1):void this.scrollPage("up")},nextPage:function(e){this.currentPage>=this.totalPages||(this.scrollPage("down"),e&&this.lazyLoadImages())},scrollPage:function(e){if(this.scrollDone){this.showArrowUp=!1,this.showArrowDown=!1,this.scrollDone=!1;var t=window.innerHeight,r=document.querySelectorAll("caption"),o=null,i=null;"down"===e?(o=r[this.currentPage-1],i=r[this.currentPage],"undefined"!=typeof $?($(o).animate({top:-t},1e3*this.pageScrollInterval),$(i).animate({top:0},1e3*this.pageScrollInterval)):(o.style.top=-t+"px",i.style.top="0px")):"up"===e&&(o=r[this.currentPage-1],i=r[this.currentPage-2],"undefined"!=typeof $?($(o).animate({top:t},1e3*this.pageScrollInterval),$(i).animate({top:0},1e3*this.pageScrollInterval)):(o.style.top=t+"px",i.style.top="0px")),(!this.browser||"IE"===this.browser.name&&this.browser.version>9)&&(o.style.transition="top "+this.pageScrollInterval+"s",o.style["-moz-transition"]="top "+this.pageScrollInterval+"s",o.style["-webkit-transition"]="top "+this.pageScrollInterval+"s",o.style["-o-transition"]="top "+this.pageScrollInterval+"s",i.style.transition="top "+this.pageScrollInterval+"s",i.style["-moz-transition"]="top "+this.pageScrollInterval+"s",i.style["-webkit-transition"]="top "+this.pageScrollInterval+"s",i.style["-o-transition"]="top "+this.pageScrollInterval+"s");var a=this;setTimeout(function(){"down"===e?a.currentPage+=1:"up"===e&&(a.currentPage-=1),1===a.currentPage&&(a.worksLinkActive=!1),a.changeArrow(),a.scrollDone=!0,m.redraw()},1e3*this.pageScrollInterval)}},lazyLoadImages:function(){var e=document.querySelectorAll("img[data-url]"),t=this;if(e.length>0){var r=null,o=[];[].slice.call(e,0,e.length).forEach(function(e){var i=e.getAttribute("data-url"),a=t.imageLoaded[i];"undefined"==typeof a||a||-1!==o.indexOf(i,0)||(r=new Image,r.src=i,r.onload=function(){t.imageLoaded[i]=!0,setTimeout(m.redraw,1e3*t.pageScrollInterval)},r.onerror=function(){console.log("Image url("+i+") load error!")},o.push(i))})}}},controller:function(){var t=e.viewModel;return t.init(),t},view:function(e){var t=location.href,r=-1!==t.indexOf("http");return[m("header",[m("div.left",[m("span.logo"),m("span.txt","DIEXT LAB")]),m("div.right",m("nav",[m("a"+(e.worksLinkActive&&e.scrollDone?".active":""),{onclick:function(){e.worksLinkActive=!0,e.nextPage.call(e,r)}},"WORKS"),m("a","ABOUT")])),e.showArrowDown?m("div.scrollDown",{onclick:e.previousPage.bind(e)},m("span.icon")):"",m("div.clear")]),m("caption.p1",m("div.main",{onmousemove:function(e){var t=this.querySelector(".card"),r=-((window.innerWidth/2-e.pageX)/20),o=(window.innerHeight/2-e.pageY)/10;t.setAttribute("style","transform:rotateY("+r+"deg) rotateX("+o+"deg);-webkit-transform: rotateY("+r+"deg) rotateX("+o+"deg);-moz-transform: rotateY("+r+"deg) rotateX("+o+"deg)")}},m("div.card",[m("img.frame",{src:"./images/bigword.svg"}),m("img.john",{src:"./images/lines.svg"}),m("img.lower",{src:"./images/smallword.svg"})]))),m("caption.p2",e.p2Images.map(function(t){return m("div.row",t.map(function(t){var o={},i=!1;return t?r&&!e.imageLoaded[t]?(i=!0,o["data-url"]=t):o.src=t:i=!0,m("div.img",[i?m("span.loading","Loading"):"",m("img",o)])}))})),m("footer",[e.showArrowUp?m("div.scrollUp",{onclick:e.nextPage.bind(e,r)},m("span.icon")):""])]}};m.mount(document.querySelector(".diext"),e)}();